/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function() {
var exports = {};
exports.id = "pages/api/me";
exports.ids = ["pages/api/me"];
exports.modules = {

/***/ "./config/dbConnect.js":
/*!*****************************!*\
  !*** ./config/dbConnect.js ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst dbConnect = () => {\n  if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.readyState) >= 1) {\n    return;\n  }\n\n  mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb://localhost:27017/bnb\", {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n    useFindAndModify: false,\n    useCreateIndex: true\n  }).then(con => console.log(\"Connected to local db\"));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (dbConnect);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL2NvbmZpZy9kYkNvbm5lY3QuanM/ZTI1MSJdLCJuYW1lcyI6WyJkYkNvbm5lY3QiLCJtb25nb29zZSIsInByb2Nlc3MiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ1c2VGaW5kQW5kTW9kaWZ5IiwidXNlQ3JlYXRlSW5kZXgiLCJ0aGVuIiwiY29uIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7O0FBRUEsTUFBTUEsU0FBUyxHQUFHLE1BQU07QUFDdEIsTUFBSUMsdUVBQUEsSUFBa0MsQ0FBdEMsRUFBeUM7QUFDdkM7QUFDRDs7QUFFREEseURBQUEsQ0FBaUJDLCtCQUFqQixFQUEyQztBQUN2Q0MsbUJBQWUsRUFBRSxJQURzQjtBQUV2Q0Msc0JBQWtCLEVBQUUsSUFGbUI7QUFHdkNDLG9CQUFnQixFQUFFLEtBSHFCO0FBSXZDQyxrQkFBYyxFQUFFO0FBSnVCLEdBQTNDLEVBS0tDLElBTEwsQ0FLVUMsR0FBRyxJQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSx1QkFBWixDQUxqQjtBQU1ELENBWEQ7O0FBYUEsK0RBQWVWLFNBQWYiLCJmaWxlIjoiLi9jb25maWcvZGJDb25uZWN0LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBkYkNvbm5lY3QgPSAoKSA9PiB7XG4gIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPj0gMSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5EQl9MT0NBTF9VUkksIHtcbiAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbiAgICAgIHVzZUZpbmRBbmRNb2RpZnk6IGZhbHNlLFxuICAgICAgdXNlQ3JlYXRlSW5kZXg6IHRydWUsXG4gICAgfSkudGhlbihjb24gPT4gY29uc29sZS5sb2coXCJDb25uZWN0ZWQgdG8gbG9jYWwgZGJcIikpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZGJDb25uZWN0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./config/dbConnect.js\n");

/***/ }),

/***/ "./controllers/authControllers.js":
/*!****************************************!*\
  !*** ./controllers/authControllers.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"registerUser\": function() { return /* binding */ registerUser; },\n/* harmony export */   \"currentUserProfile\": function() { return /* binding */ currentUserProfile; },\n/* harmony export */   \"updateProfile\": function() { return /* binding */ updateProfile; },\n/* harmony export */   \"forgotPassword\": function() { return /* binding */ forgotPassword; },\n/* harmony export */   \"resetPassword\": function() { return /* binding */ resetPassword; },\n/* harmony export */   \"allAdminUsers\": function() { return /* binding */ allAdminUsers; },\n/* harmony export */   \"getUserDetails\": function() { return /* binding */ getUserDetails; },\n/* harmony export */   \"updateUser\": function() { return /* binding */ updateUser; },\n/* harmony export */   \"deleteUser\": function() { return /* binding */ deleteUser; }\n/* harmony export */ });\n/* harmony import */ var _models_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/user */ \"./models/user.js\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cloudinary */ \"cloudinary\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/errorHandler */ \"./utils/errorHandler.js\");\n/* harmony import */ var _middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../middlewares/catchAsyncErrors */ \"./middlewares/catchAsyncErrors.js\");\n/* harmony import */ var _utils_sendEmail__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/sendEmail */ \"./utils/sendEmail.js\");\n/* harmony import */ var next_absolute_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next-absolute-url */ \"next-absolute-url\");\n/* harmony import */ var next_absolute_url__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_absolute_url__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n // Setting up cloudinary config\n\ncloudinary__WEBPACK_IMPORTED_MODULE_1___default().config({\n  cloud_name: \"barbarjinks\",\n  api_key: \"751394246942615\",\n  api_secret: \"zJWNKD-D4QZT4boijsN43WDRbAQ\"\n}); // Register user   =>   /api/auth/register\n\nconst registerUser = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const result = await cloudinary__WEBPACK_IMPORTED_MODULE_1___default().v2.uploader.upload(req.body.avatar, {\n    folder: \"bookit/avatars\",\n    width: \"150\",\n    crop: \"scale\"\n  });\n  const {\n    name,\n    email,\n    password\n  } = req.body;\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.create({\n    name,\n    email,\n    password,\n    avatar: {\n      public_id: result.public_id,\n      url: result.secure_url\n    }\n  });\n  res.status(200).json({\n    success: true,\n    message: \"Account Registered successfully\"\n  });\n}); // Cuurent user profile   =>   /api/me\n\nconst currentUserProfile = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findById(req.user._id);\n  res.status(200).json({\n    success: true,\n    user\n  });\n}); // Update user profile   =>   /api/me/update\n\nconst updateProfile = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findById(req.user._id);\n\n  if (user) {\n    user.name = req.body.name;\n    user.email = req.body.email;\n    if (req.body.password) user.password = req.body.password;\n  } // Update avatar\n\n\n  if (req.body.avatar !== \"\") {\n    const image_id = user.avatar.public_id; // Delete user previous image/avatar\n\n    await cloudinary__WEBPACK_IMPORTED_MODULE_1___default().v2.uploader.destroy(image_id);\n    const result = await cloudinary__WEBPACK_IMPORTED_MODULE_1___default().v2.uploader.upload(req.body.avatar, {\n      folder: \"bookit/avatars\",\n      width: \"150\",\n      crop: \"scale\"\n    });\n    user.avatar = {\n      public_id: result.public_id,\n      url: result.secure_url\n    };\n  }\n\n  await user.save();\n  res.status(200).json({\n    success: true\n  });\n}); // Forgot password   =>   /api/password/forgot\n\nconst forgotPassword = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res, next) => {\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findOne({\n    email: req.body.email\n  });\n\n  if (!user) {\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__.default(\"User not found with this email\", 404));\n  } // Get reset token\n\n\n  const resetToken = user.getResetPasswordToken();\n  await user.save({\n    validateBeforeSave: false\n  }); // Get origin\n\n  const {\n    origin\n  } = next_absolute_url__WEBPACK_IMPORTED_MODULE_5___default()(req); // Create reset password url\n\n  const resetUrl = `${origin}/password/reset/${resetToken}`;\n  const message = `Your password reset url is as follow: \\n\\n ${resetUrl} \\n\\n\\ If you have not requested this email, then ignore it.`;\n\n  try {\n    await (0,_utils_sendEmail__WEBPACK_IMPORTED_MODULE_4__.default)({\n      email: user.email,\n      subject: \"BookIT Password Recovery\",\n      message\n    });\n    res.status(200).json({\n      success: true,\n      message: `Email sent to: ${user.email}`\n    });\n  } catch (error) {\n    user.resetPasswordToken = undefined;\n    user.resetPasswordExpire = undefined;\n    await user.save({\n      validateBeforeSave: false\n    });\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__.default(error.message, 500));\n  }\n}); // Reset password   =>   /api/password/reset/:token\n\nconst resetPassword = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res, next) => {\n  // Hash URL token\n  const resetPasswordToken = crypto__WEBPACK_IMPORTED_MODULE_6___default().createHash(\"sha256\").update(req.query.token).digest(\"hex\");\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findOne({\n    resetPasswordToken,\n    resetPasswordExpire: {\n      $gt: Date.now()\n    }\n  });\n\n  if (!user) {\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__.default(\"Password reset token is invalid or has been expired\", 400));\n  }\n\n  if (req.body.password !== req.body.confirmPassword) {\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__.default(\"Password does not match\", 400));\n  } // Setup the new password\n\n\n  user.password = req.body.password;\n  user.resetPasswordToken = undefined;\n  user.resetPasswordExpire = undefined;\n  await user.save();\n  res.status(200).json({\n    success: true,\n    message: \"Password updated successfully\"\n  });\n}); // Get all users   =>   /api/admin/users\n\nconst allAdminUsers = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const users = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.find();\n  res.status(200).json({\n    success: true,\n    users\n  });\n}); // Get user details  =>   /api/admin/users/:id\n\nconst getUserDetails = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findById(req.query.id);\n\n  if (!user) {\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__.default(\"User not found with this ID.\", 404));\n  }\n\n  res.status(200).json({\n    success: true,\n    user\n  });\n}); // Update user details  =>   /api/admin/users/:id\n\nconst updateUser = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const newUserData = {\n    name: req.body.name,\n    email: req.body.email,\n    role: req.body.role\n  };\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findByIdAndUpdate(req.query.id, newUserData, {\n    new: true,\n    runValidators: true,\n    useFindAndModify: false\n  });\n  res.status(200).json({\n    success: true\n  });\n}); // Delete user    =>   /api/admin/users/:id\n\nconst deleteUser = (0,_middlewares_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_3__.default)(async (req, res) => {\n  const user = await _models_user__WEBPACK_IMPORTED_MODULE_0__.default.findById(req.query.id);\n\n  if (!user) {\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_2__.default(\"User not found with this ID.\", 404));\n  } // Remove avatar\n\n\n  const image_id = user.avatar.public_id;\n  await cloudinary__WEBPACK_IMPORTED_MODULE_1___default().v2.uploader.destroy(image_id);\n  await user.remove();\n  res.status(200).json({\n    success: true,\n    user\n  });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL2NvbnRyb2xsZXJzL2F1dGhDb250cm9sbGVycy5qcz81ZTQxIl0sIm5hbWVzIjpbImNsb3VkaW5hcnkiLCJjbG91ZF9uYW1lIiwicHJvY2VzcyIsImFwaV9rZXkiLCJhcGlfc2VjcmV0IiwiQ0xPVURJTkFSWV9BUElfU0VDUkVUIiwicmVnaXN0ZXJVc2VyIiwiY2F0Y2hBc3luY0Vycm9ycyIsInJlcSIsInJlcyIsInJlc3VsdCIsImJvZHkiLCJhdmF0YXIiLCJmb2xkZXIiLCJ3aWR0aCIsImNyb3AiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInVzZXIiLCJVc2VyIiwicHVibGljX2lkIiwidXJsIiwic2VjdXJlX3VybCIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImN1cnJlbnRVc2VyUHJvZmlsZSIsIl9pZCIsInVwZGF0ZVByb2ZpbGUiLCJpbWFnZV9pZCIsInNhdmUiLCJmb3Jnb3RQYXNzd29yZCIsIm5leHQiLCJFcnJvckhhbmRsZXIiLCJyZXNldFRva2VuIiwiZ2V0UmVzZXRQYXNzd29yZFRva2VuIiwidmFsaWRhdGVCZWZvcmVTYXZlIiwib3JpZ2luIiwiYWJzb2x1dGVVcmwiLCJyZXNldFVybCIsInNlbmRFbWFpbCIsInN1YmplY3QiLCJlcnJvciIsInJlc2V0UGFzc3dvcmRUb2tlbiIsInVuZGVmaW5lZCIsInJlc2V0UGFzc3dvcmRFeHBpcmUiLCJyZXNldFBhc3N3b3JkIiwiY3J5cHRvIiwidXBkYXRlIiwicXVlcnkiLCJ0b2tlbiIsImRpZ2VzdCIsIiRndCIsIkRhdGUiLCJub3ciLCJjb25maXJtUGFzc3dvcmQiLCJhbGxBZG1pblVzZXJzIiwidXNlcnMiLCJnZXRVc2VyRGV0YWlscyIsImlkIiwidXBkYXRlVXNlciIsIm5ld1VzZXJEYXRhIiwicm9sZSIsIm5ldyIsInJ1blZhbGlkYXRvcnMiLCJ1c2VGaW5kQW5kTW9kaWZ5IiwiZGVsZXRlVXNlciIsInJlbW92ZSJdLCJtYXBw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LFFBQU1aLElBQUksQ0FBQ2tELE1BQUwsRUFBTjtBQUVBNUQsS0FBRyxDQUFDZSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDbkJDLFdBQU8sRUFBRSxJQURVO0FBRW5CUDtBQUZtQixHQUFyQjtBQUlELENBakJrQyxDQUFuQyIsImZpbGUiOiIuL2NvbnRyb2xsZXJzL2F1dGhDb250cm9sbGVycy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2VyIGZyb20gXCIuLi9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IGNsb3VkaW5hcnkgZnJvbSBcImNsb3VkaW5hcnlcIjtcblxuaW1wb3J0IEVycm9ySGFuZGxlciBmcm9tIFwiLi4vdXRpbHMvZXJyb3JIYW5kbGVyXCI7XG5pbXBvcnQgY2F0Y2hBc3luY0Vycm9ycyBmcm9tIFwiLi4vbWlkZGxld2FyZXMvY2F0Y2hBc3luY0Vycm9yc1wiO1xuaW1wb3J0IHNlbmRFbWFpbCBmcm9tIFwiLi4vdXRpbHMvc2VuZEVtYWlsXCI7XG5cbmltcG9ydCBhYnNvbHV0ZVVybCBmcm9tIFwibmV4dC1hYnNvbHV0ZS11cmxcIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuXG4vLyBTZXR0aW5nIHVwIGNsb3VkaW5hcnkgY29uZmlnXG5jbG91ZGluYXJ5LmNvbmZpZyh7XG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQ0xPVURfTkFNRSxcbiAgYXBpX2tleTogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfS0VZLFxuICBhcGlfc2VjcmV0OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9TRUNSRVQsXG59KTtcblxuLy8gUmVnaXN0ZXIgdXNlciAgID0+ICAgL2FwaS9hdXRoL3JlZ2lzdGVyXG5jb25zdCByZWdpc3RlclVzZXIgPSBjYXRjaEFzeW5jRXJyb3JzKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbG91ZGluYXJ5LnYyLnVwbG9hZGVyLnVwbG9hZChyZXEuYm9keS5hdmF0YXIsIHtcbiAgICBmb2xkZXI6IFwiYm9va2l0L2F2YXRhcnNcIixcbiAgICB3aWR0aDogXCIxNTBcIixcbiAgICBjcm9wOiBcInNjYWxlXCIsXG4gIH0pO1xuXG4gIGNvbnN0IHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcblxuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgIG5hbWUsXG4gICAgZW1haWwsXG4gICAgcGFzc3dvcmQsXG4gICAgYXZhdGFyOiB7XG4gICAgICBwdWJsaWNfaWQ6IHJlc3VsdC5wdWJsaWNfaWQsXG4gICAgICB1cmw6IHJlc3VsdC5zZWN1cmVfdXJsLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBSZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVwiLFxuICB9KTtcbn0pO1xuXG4vLyBDdXVyZW50IHVzZXIgcHJvZmlsZSAgID0+ICAgL2FwaS9tZVxuY29uc3QgY3VycmVudFVzZXJQcm9maWxlID0gY2F0Y2hBc3luY0Vycm9ycyhhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuX2lkKTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICB1c2VyLFxuICB9KTtcbn0pO1xuXG4vLyBVcGRhdGUgdXNlciBwcm9maWxlICAgPT4gICAvYXBpL21lL3VwZGF0ZVxuY29uc3QgdXBkYXRlUHJvZmlsZSA9IGNhdGNoQXN5bmNFcnJvcnMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLl9pZCk7XG5cbiAgaWYgKHVzZXIpIHtcbiAgICB1c2VyLm5hbWUgPSByZXEuYm9keS5uYW1lO1xuICAgIHVzZXIuZW1haWwgPSByZXEuYm9keS5lbWFpbDtcblxuICAgIGlmIChyZXEuYm9keS5wYXNzd29yZCkgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkO1xuICB9XG5cbiAgLy8gVXBkYXRlIGF2YXRhclxuICBpZiAocmVxLmJvZHkuYXZhdGFyICE9PSBcIlwiKSB7XG4gICAgY29uc3QgaW1hZ2VfaWQgPSB1c2VyLmF2YXRhci5wdWJsaWNfaWQ7XG5cbiAgICAvLyBEZWxldGUgdXNlciBwcmV2aW91cyBpbWFnZS9hdmF0YXJcbiAgICBhd2FpdCBjbG91ZGluYXJ5LnYyLnVwbG9hZGVyLmRlc3Ryb3koaW1hZ2VfaWQpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xvdWRpbmFyeS52Mi51cGxvYWRlci51cGxvYWQocmVxLmJvZHkuYXZhdGFyLCB7XG4gICAgICBmb2xkZXI6IFwiYm9va2l0L2F2YXRhcnNcIixcbiAgICAgIHdpZHRoOiBcIjE1MFwiLFxuICAgICAgY3JvcDogXCJzY2FsZVwiLFxuICAgIH0pO1xuXG4gICAgdXNlci5hdmF0YXIgPSB7XG4gICAgICBwdWJsaWNfaWQ6IHJlc3VsdC5wdWJsaWNfaWQsXG4gICAgICB1cmw6IHJlc3VsdC5zZWN1cmVfdXJsLFxuICAgIH07XG4gIH1cblxuICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgfSk7XG59KTtcblxuLy8gRm9yZ290IHBhc3N3b3JkICAgPT4gICAvYXBpL3Bhc3N3b3JkL2ZvcmdvdFxuY29uc3QgZm9yZ290UGFzc3dvcmQgPSBjYXRjaEFzeW5jRXJyb3JzKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWw6IHJlcS5ib2R5LmVtYWlsIH0pO1xuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvckhhbmRsZXIoXCJVc2VyIG5vdCBmb3VuZCB3aXRoIHRoaXMgZW1haWxcIiwgNDA0KSk7XG4gIH1cblxuICAvLyBHZXQgcmVzZXQgdG9rZW5cbiAgY29uc3QgcmVzZXRUb2tlbiA9IHVzZXIuZ2V0UmVzZXRQYXNzd29yZFRva2VuKCk7XG5cbiAgYXdhaXQgdXNlci5zYXZlKHsgdmFsaWRhdGVCZWZvcmVTYXZlOiBmYWxzZSB9KTtcblxuICAvLyBHZXQgb3JpZ2luXG4gIGNvbnN0IHsgb3JpZ2luIH0gPSBhYnNvbHV0ZVVybChyZXEpO1xuXG4gIC8vIENyZWF0ZSByZXNldCBwYXNzd29yZCB1cmxcbiAgY29uc3QgcmVzZXRVcmwgPSBgJHtvcmlnaW59L3Bhc3N3b3JkL3Jlc2V0LyR7cmVzZXRUb2tlbn1gO1xuXG4gIGNvbnN0IG1lc3NhZ2UgPSBgWW91ciBwYXNzd29yZCByZXNldCB1cmwgaXMgYXMgZm9sbG93OiBcXG5cXG4gJHtyZXNldFVybH0gXFxuXFxuXFwgSWYgeW91IGhhdmUgbm90IHJlcXVlc3RlZCB0aGlzIGVtYWlsLCB0aGVuIGlnbm9yZSBpdC5gO1xuXG4gIHRyeSB7XG4gICAgYXdhaXQgc2VuZEVtYWlsKHtcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgc3ViamVjdDogXCJCb29rSVQgUGFzc3dvcmQgUmVjb3ZlcnlcIixcbiAgICAgIG1lc3NhZ2UsXG4gICAgfSk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogYEVtYWlsIHNlbnQgdG86ICR7dXNlci5lbWFpbH1gLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHVzZXIucmVzZXRQYXNzd29yZFRva2VuID0gdW5kZWZpbmVkO1xuICAgIHVzZXIucmVzZXRQYXNzd29yZEV4cGlyZSA9IHVuZGVmaW5lZDtcblxuICAgIGF3YWl0IHVzZXIuc2F2ZSh7IHZhbGlkYXRlQmVmb3JlU2F2ZTogZmFsc2UgfSk7XG5cbiAgICByZXR1cm4gbmV4dChuZXcgRXJyb3JIYW5kbGVyKGVycm9yLm1lc3NhZ2UsIDUwMCkpO1xuICB9XG59KTtcblxuLy8gUmVzZXQgcGFzc3dvcmQgICA9PiAgIC9hcGkvcGFzc3dvcmQvcmVzZXQvOnRva2VuXG5jb25zdCByZXNldFBhc3N3b3JkID0gY2F0Y2hBc3luY0Vycm9ycyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gSGFzaCBVUkwgdG9rZW5cbiAgY29uc3QgcmVzZXRQYXNzd29yZFRva2VuID0gY3J5cHRvXG4gICAgLmNyZWF0ZUhhc2goXCJzaGEyNTZcIilcbiAgICAudXBkYXRlKHJlcS5xdWVyeS50b2tlbilcbiAgICAuZGlnZXN0KFwiaGV4XCIpO1xuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgIHJlc2V0UGFzc3dvcmRUb2tlbixcbiAgICByZXNldFBhc3N3b3JkRXhwaXJlOiB7ICRndDogRGF0ZS5ub3coKSB9LFxuICB9KTtcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dChcbiAgICAgIG5ldyBFcnJvckhhbmRsZXIoXG4gICAgICAgIFwiUGFzc3dvcmQgcmVzZXQgdG9rZW4gaXMgaW52YWxpZCBvciBoYXMgYmVlbiBleHBpcmVkXCIsXG4gICAgICAgIDQwMFxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBpZiAocmVxLmJvZHkucGFzc3dvcmQgIT09IHJlcS5ib2R5LmNvbmZpcm1QYXNzd29yZCkge1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvckhhbmRsZXIoXCJQYXNzd29yZCBkb2VzIG5vdCBtYXRjaFwiLCA0MDApKTtcbiAgfVxuXG4gIC8vIFNldHVwIHRoZSBuZXcgcGFzc3dvcmRcbiAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkO1xuXG4gIHVzZXIucmVzZXRQYXNzd29yZFRva2VuID0gdW5kZWZpbmVkO1xuICB1c2VyLnJlc2V0UGFzc3dvcmRFeHBpcmUgPSB1bmRlZmluZWQ7XG5cbiAgYXdhaXQgdXNlci5zYXZlKCk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZTogXCJQYXNzd29yZCB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICB9KTtcbn0pO1xuXG4vLyBHZXQgYWxsIHVzZXJzICAgPT4gICAvYXBpL2FkbWluL3VzZXJzXG5jb25zdCBhbGxBZG1pblVzZXJzID0gY2F0Y2hBc3luY0Vycm9ycyhhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICB1c2VycyxcbiAgfSk7XG59KTtcblxuLy8gR2V0IHVzZXIgZGV0YWlscyAgPT4gICAvYXBpL2FkbWluL3VzZXJzLzppZFxuY29uc3QgZ2V0VXNlckRldGFpbHMgPSBjYXRjaEFzeW5jRXJyb3JzKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEucXVlcnkuaWQpO1xuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvckhhbmRsZXIoXCJVc2VyIG5vdCBmb3VuZCB3aXRoIHRoaXMgSUQuXCIsIDQwNCkpO1xuICB9XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgdXNlcixcbiAgfSk7XG59KTtcblxuLy8gVXBkYXRlIHVzZXIgZGV0YWlscyAgPT4gICAvYXBpL2FkbWluL3VzZXJzLzppZFxuY29uc3QgdXBkYXRlVXNlciA9IGNhdGNoQXN5bmNFcnJvcnMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IG5ld1VzZXJEYXRhID0ge1xuICAgIG5hbWU6IHJlcS5ib2R5Lm5hbWUsXG4gICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxuICAgIHJvbGU6IHJlcS5ib2R5LnJvbGUsXG4gIH07XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnF1ZXJ5LmlkLCBuZXdVc2VyRGF0YSwge1xuICAgIG5ldzogdHJ1ZSxcbiAgICBydW5WYWxpZGF0b3JzOiB0cnVlLFxuICAgIHVzZUZpbmRBbmRNb2RpZnk6IGZhbHNlLFxuICB9KTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgfSk7XG59KTtcblxuLy8gRGVsZXRlIHVzZXIgICAgPT4gICAvYXBpL2FkbWluL3VzZXJzLzppZFxuY29uc3QgZGVsZXRlVXNlciA9IGNhdGNoQXN5bmNFcnJvcnMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS5xdWVyeS5pZCk7XG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIG5leHQobmV3IEVycm9ySGFuZGxlcihcIlVzZXIgbm90IGZvdW5kIHdpdGggdGhpcyBJRC5cIiwgNDA0KSk7XG4gIH1cblxuICAvLyBSZW1vdmUgYXZhdGFyXG4gIGNvbnN0IGltYWdlX2lkID0gdXNlci5hdmF0YXIucHVibGljX2lkO1xuICBhd2FpdCBjbG91ZGluYXJ5LnYyLnVwbG9hZGVyLmRlc3Ryb3koaW1hZ2VfaWQpO1xuXG4gIGF3YWl0IHVzZXIucmVtb3ZlKCk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgdXNlcixcbiAgfSk7XG59KTtcblxuZXhwb3J0IHtcbiAgcmVnaXN0ZXJVc2VyLFxuICBjdXJyZW50VXNlclByb2ZpbGUsXG4gIHVwZGF0ZVByb2ZpbGUsXG4gIGZvcmdvdFBhc3N3b3JkLFxuICByZXNldFBhc3N3b3JkLFxuICBhbGxBZG1pblVzZXJzLFxuICBnZXRVc2VyRGV0YWlscyxcbiAgdXBkYXRlVXNlcixcbiAgZGVsZXRlVXNlcixcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./controllers/authControllers.js\n");

/***/ }),

/***/ "./middlewares/auth.js":
/*!*****************************!*\
  !*** ./middlewares/auth.js ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isAuthenticatedUser\": function() { return /* binding */ isAuthenticatedUser; },\n/* harmony export */   \"authorizeRoles\": function() { return /* binding */ authorizeRoles; }\n/* harmony export */ });\n/* harmony import */ var _catchAsyncErrors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./catchAsyncErrors */ \"./middlewares/catchAsyncErrors.js\");\n/* harmony import */ var _utils_errorHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/errorHandler */ \"./utils/errorHandler.js\");\n/* harmony import */ var next_auth_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/client */ \"next-auth/client\");\n/* harmony import */ var next_auth_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_client__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst isAuthenticatedUser = (0,_catchAsyncErrors__WEBPACK_IMPORTED_MODULE_0__.default)(async (req, res, next) => {\n  const session = await (0,next_auth_client__WEBPACK_IMPORTED_MODULE_2__.getSession)({\n    req\n  });\n\n  if (!session) {\n    return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_1__.default(\"Please log in\", 401));\n  }\n\n  req.user = session.user;\n  next();\n}); // Handling user roles\n\nconst authorizeRoles = (...roles) => {\n  return (req, res, next) => {\n    if (!roles.includes(req.user.role)) {\n      return next(new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_1__.default(`Role (${req.user.role}) is not allowed to access this resource.`, 403));\n    }\n\n    next();\n  };\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL21pZGRsZXdhcmVzL2F1dGguanM/NWRjMCJdLCJuYW1lcyI6WyJpc0F1dGhlbnRpY2F0ZWRVc2VyIiwiY2F0Y2hBc3luY0Vycm9ycyIsInJlcSIsInJlcyIsIm5leHQiLCJzZXNzaW9uIiwiZ2V0U2Vzc2lvbiIsIkVycm9ySGFuZGxlciIsInVzZXIiLCJhdXRob3JpemVSb2xlcyIsInJvbGVzIiwiaW5jbHVkZXMiLCJyb2xlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQSxNQUFNQSxtQkFBbUIsR0FBR0MsMERBQWdCLENBQUMsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtBQUNyRSxRQUFNQyxPQUFPLEdBQUcsTUFBTUMsNERBQVUsQ0FBQztBQUFFSjtBQUFGLEdBQUQsQ0FBaEM7O0FBRUEsTUFBSSxDQUFDRyxPQUFMLEVBQWM7QUFDWixXQUFPRCxJQUFJLENBQUMsSUFBSUcsd0RBQUosQ0FBaUIsZUFBakIsRUFBa0MsR0FBbEMsQ0FBRCxDQUFYO0FBQ0Q7O0FBRURMLEtBQUcsQ0FBQ00sSUFBSixHQUFXSCxPQUFPLENBQUNHLElBQW5CO0FBQ0FKLE1BQUk7QUFDTCxDQVQyQyxDQUE1QyxDLENBV0E7O0FBQ0EsTUFBTUssY0FBYyxHQUFHLENBQUMsR0FBR0MsS0FBSixLQUFjO0FBQ25DLFNBQU8sQ0FBQ1IsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDekIsUUFBSSxDQUFDTSxLQUFLLENBQUNDLFFBQU4sQ0FBZVQsR0FBRyxDQUFDTSxJQUFKLENBQVNJLElBQXhCLENBQUwsRUFBb0M7QUFDbEMsYUFBT1IsSUFBSSxDQUNULElBQUlHLHdEQUFKLENBQ0csU0FBUUwsR0FBRyxDQUFDTSxJQUFKLENBQVNJLElBQUssMkNBRHpCLEVBRUUsR0FGRixDQURTLENBQVg7QUFNRDs7QUFFRFIsUUFBSTtBQUNMLEdBWEQ7QUFZRCxDQWJEIiwiZmlsZSI6Ii4vbWlkZGxld2FyZXMvYXV0aC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjYXRjaEFzeW5jRXJyb3JzIGZyb20gXCIuL2NhdGNoQXN5bmNFcnJvcnNcIjtcbmltcG9ydCBFcnJvckhhbmRsZXIgZnJvbSBcIi4uL3V0aWxzL2Vycm9ySGFuZGxlclwiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGgvY2xpZW50XCI7XG5cbmNvbnN0IGlzQXV0aGVudGljYXRlZFVzZXIgPSBjYXRjaEFzeW5jRXJyb3JzKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbih7IHJlcSB9KTtcblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4gbmV4dChuZXcgRXJyb3JIYW5kbGVyKFwiUGxlYXNlIGxvZyBpblwiLCA0MDEpKTtcbiAgfVxuXG4gIHJlcS51c2VyID0gc2Vzc2lvbi51c2VyO1xuICBuZXh0KCk7XG59KTtcblxuLy8gSGFuZGxpbmcgdXNlciByb2xlc1xuY29uc3QgYXV0aG9yaXplUm9sZXMgPSAoLi4ucm9sZXMpID0+IHtcbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmICghcm9sZXMuaW5jbHVkZXMocmVxLnVzZXIucm9sZSkpIHtcbiAgICAgIHJldHVybiBuZXh0KFxuICAgICAgICBuZXcgRXJyb3JIYW5kbGVyKFxuICAgICAgICAgIGBSb2xlICgke3JlcS51c2VyLnJvbGV9KSBpcyBub3QgYWxsb3dlZCB0byBhY2Nlc3MgdGhpcyByZXNvdXJjZS5gLFxuICAgICAgICAgIDQwM1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIG5leHQoKTtcbiAgfTtcbn07XG5cbmV4cG9ydCB7IGlzQXV0aGVudGljYXRlZFVzZXIsIGF1dGhvcml6ZVJvbGVzIH07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./middlewares/auth.js\n");

/***/ }),

/***/ "./middlewares/catchAsyncErrors.js":
/*!*****************************************!*\
  !*** ./middlewares/catchAsyncErrors.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (func => (req, res, next) => Promise.resolve(func(req, res, next)).catch(next));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL21pZGRsZXdhcmVzL2NhdGNoQXN5bmNFcnJvcnMuanM/NDFiNyJdLCJuYW1lcyI6WyJmdW5jIiwicmVxIiwicmVzIiwibmV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7QUFBQSwrREFBZ0JBLElBQUQsSUFBVSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUN2QkMsT0FBTyxDQUFDQyxPQUFSLENBQWdCTCxJQUFJLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLENBQXBCLEVBQXNDRyxLQUF0QyxDQUE0Q0gsSUFBNUMsQ0FERiIsImZpbGUiOiIuL21pZGRsZXdhcmVzL2NhdGNoQXN5bmNFcnJvcnMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAoZnVuYykgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PlxuICBQcm9taXNlLnJlc29sdmUoZnVuYyhyZXEsIHJlcywgbmV4dCkpLmNhdGNoKG5leHQpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./middlewares/catchAsyncErrors.js\n");

/***/ }),

/***/ "./middlewares/errors.js":
/*!*******************************!*\
  !*** ./middlewares/errors.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _utils_errorHandler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errorHandler */ \"./utils/errorHandler.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((err, req, res, next) => {\n  err.statusCode = err.statusCode || 500;\n\n  let error = _objectSpread({}, err);\n\n  error.message = err.message; // Wrong Mongoose Object ID Error\n\n  if (err.name === \"CastError\") {\n    const message = `Resource not found. Invalid: ${err.path}`;\n    error = new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_0__.default(message, 400);\n  } // Handling mongoose Validation error\n\n\n  if (err.name === \"ValidationError\") {\n    const message = Object.values(err.errors).map(value => value.message);\n    error = new _utils_errorHandler__WEBPACK_IMPORTED_MODULE_0__.default(message, 400);\n  }\n\n  res.status(err.statusCode).json({\n    success: false,\n    error,\n    message: error.message,\n    stack: error.stack\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL21pZGRsZXdhcmVzL2Vycm9ycy5qcz8xN2I5Il0sIm5hbWVzIjpbImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJzdGF0dXNDb2RlIiwiZXJyb3IiLCJtZXNzYWdlIiwibmFtZSIsInBhdGgiLCJFcnJvckhhbmRsZXIiLCJPYmplY3QiLCJ2YWx1ZXMiLCJlcnJvcnMiLCJtYXAiLCJ2YWx1ZSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwic3RhY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFFQSwrREFBZSxDQUFDQSxHQUFELEVBQU1DLEdBQU4sRUFBV0MsR0FBWCxFQUFnQkMsSUFBaEIsS0FBeUI7QUFDdENILEtBQUcsQ0FBQ0ksVUFBSixHQUFpQkosR0FBRyxDQUFDSSxVQUFKLElBQWtCLEdBQW5DOztBQUVBLE1BQUlDLEtBQUsscUJBQVFMLEdBQVIsQ0FBVDs7QUFFQUssT0FBSyxDQUFDQyxPQUFOLEdBQWdCTixHQUFHLENBQUNNLE9BQXBCLENBTHNDLENBT3RDOztBQUNBLE1BQUlOLEdBQUcsQ0FBQ08sSUFBSixLQUFhLFdBQWpCLEVBQThCO0FBQzVCLFVBQU1ELE9BQU8sR0FBSSxnQ0FBK0JOLEdBQUcsQ0FBQ1EsSUFBSyxFQUF6RDtBQUNBSCxTQUFLLEdBQUcsSUFBSUksd0RBQUosQ0FBaUJILE9BQWpCLEVBQTBCLEdBQTFCLENBQVI7QUFDRCxHQVhxQyxDQWF0Qzs7O0FBQ0EsTUFBSU4sR0FBRyxDQUFDTyxJQUFKLEtBQWEsaUJBQWpCLEVBQW9DO0FBQ2xDLFVBQU1ELE9BQU8sR0FBR0ksTUFBTSxDQUFDQyxNQUFQLENBQWNYLEdBQUcsQ0FBQ1ksTUFBbEIsRUFBMEJDLEdBQTFCLENBQStCQyxLQUFELElBQVdBLEtBQUssQ0FBQ1IsT0FBL0MsQ0FBaEI7QUFDQUQsU0FBSyxHQUFHLElBQUlJLHdEQUFKLENBQWlCSCxPQUFqQixFQUEwQixHQUExQixDQUFSO0FBQ0Q7O0FBRURKLEtBQUcsQ0FBQ2EsTUFBSixDQUFXZixHQUFHLENBQUNJLFVBQWYsRUFBMkJZLElBQTNCLENBQWdDO0FBQzlCQyxXQUFPLEVBQUUsS0FEcUI7QUFFOUJaLFNBRjhCO0FBRzlCQyxXQUFPLEVBQUVELEtBQUssQ0FBQ0MsT0FIZTtBQUk5QlksU0FBSyxFQUFFYixLQUFLLENBQUNhO0FBSmlCLEdBQWhDO0FBTUQsQ0F6QkQiLCJmaWxlIjoiLi9taWRkbGV3YXJlcy9lcnJvcnMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRXJyb3JIYW5kbGVyIGZyb20gXCIuLi91dGlscy9lcnJvckhhbmRsZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgZXJyLnN0YXR1c0NvZGUgPSBlcnIuc3RhdHVzQ29kZSB8fCA1MDA7XG5cbiAgbGV0IGVycm9yID0geyAuLi5lcnIgfTtcblxuICBlcnJvci5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG5cbiAgLy8gV3JvbmcgTW9uZ29vc2UgT2JqZWN0IElEIEVycm9yXG4gIGlmIChlcnIubmFtZSA9PT0gXCJDYXN0RXJyb3JcIikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgUmVzb3VyY2Ugbm90IGZvdW5kLiBJbnZhbGlkOiAke2Vyci5wYXRofWA7XG4gICAgZXJyb3IgPSBuZXcgRXJyb3JIYW5kbGVyKG1lc3NhZ2UsIDQwMCk7XG4gIH1cblxuICAvLyBIYW5kbGluZyBtb25nb29zZSBWYWxpZGF0aW9uIGVycm9yXG4gIGlmIChlcnIubmFtZSA9PT0gXCJWYWxpZGF0aW9uRXJyb3JcIikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBPYmplY3QudmFsdWVzKGVyci5lcnJvcnMpLm1hcCgodmFsdWUpID0+IHZhbHVlLm1lc3NhZ2UpO1xuICAgIGVycm9yID0gbmV3IEVycm9ySGFuZGxlcihtZXNzYWdlLCA0MDApO1xuICB9XG5cbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzQ29kZSkuanNvbih7XG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgZXJyb3IsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gIH0pO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./middlewares/errors.js\n");

/***/ }),

/***/ "./models/user.js":
/*!************************!*\
  !*** ./models/user.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! validator */ \"validator\");\n/* harmony import */ var validator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(validator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n  name: {\n    type: String,\n    required: [true, 'Please enter your name'],\n    maxLength: [50, 'Your name cannot exceed 50 characters']\n  },\n  email: {\n    type: String,\n    required: [true, 'Please enter your email'],\n    unique: true,\n    validate: [(validator__WEBPACK_IMPORTED_MODULE_1___default().isEmail), 'Please enter valid email address']\n  },\n  password: {\n    type: String,\n    required: [true, 'Please enter your password'],\n    minLength: [6, 'Your password must be longer than 6 characters'],\n    select: false\n  },\n  avatar: {\n    public_id: {\n      type: String,\n      required: true\n    },\n    url: {\n      type: String,\n      required: true\n    }\n  },\n  role: {\n    type: String,\n    default: 'user'\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  resetPasswordToken: String,\n  resetPasswordExpire: Date\n}); // Encrypting password before saving user\n\nuserSchema.pre('save', async function (next) {\n  if (!this.isModified('password')) {\n    next();\n  }\n\n  this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(this.password, 10);\n}); // Compare user password\n\nuserSchema.methods.comparePassword = async function (enteredPassword) {\n  return await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(enteredPassword, this.password);\n}; // Generate password reset token\n\n\nuserSchema.methods.getResetPasswordToken = function () {\n  // Generate token\n  const resetToken = crypto__WEBPACK_IMPORTED_MODULE_3___default().randomBytes(20).toString('hex'); // Hash and set to resetPasswordToken field\n\n  this.resetPasswordToken = crypto__WEBPACK_IMPORTED_MODULE_3___default().createHash('sha256').update(resetToken).digest('hex'); // Set token expire time\n\n  this.resetPasswordExpire = Date.now() + 30 * 60 * 1000;\n  return resetToken;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.User) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', userSchema));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL21vZGVscy91c2VyLmpzPzFmNjkiXSwibmFtZXMiOlsidXNlclNjaGVtYSIsIm1vbmdvb3NlIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1heExlbmd0aCIsImVtYWlsIiwidW5pcXVlIiwidmFsaWRhdGUiLCJ2YWxpZGF0b3IiLCJwYXNzd29yZCIsIm1pbkxlbmd0aCIsInNlbGVjdCIsImF2YXRhciIsInB1YmxpY19pZCIsInVybCIsInJvbGUiLCJkZWZhdWx0IiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsInJlc2V0UGFzc3dvcmRUb2tlbiIsInJlc2V0UGFzc3dvcmRFeHBpcmUiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsImJjcnlwdCIsIm1ldGhvZHMiLCJjb21wYXJlUGFzc3dvcmQiLCJlbnRlcmVkUGFzc3dvcmQiLCJnZXRSZXNldFBhc3N3b3JkVG9rZW4iLCJyZXNldFRva2VuIiwiY3J5cHRvIiwidG9TdHJpbmciLCJ1cGRhdGUiLCJkaWdlc3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsTUFBTUEsVUFBVSxHQUFHLElBQUlDLHdEQUFKLENBQW9CO0FBQ25DQyxNQUFJLEVBQUU7QUFDRkMsUUFBSSxFQUFFQyxNQURKO0FBRUZDLFlBQVEsRUFBRSxDQUFDLElBQUQsRUFBTyx3QkFBUCxDQUZSO0FBR0ZDLGFBQVMsRUFBRSxDQUFDLEVBQUQsRUFBSyx1Q0FBTDtBQUhULEdBRDZCO0FBTW5DQyxPQUFLLEVBQUU7QUFDSEosUUFBSSxFQUFFQyxNQURIO0FBRUhDLFlBQVEsRUFBRSxDQUFDLElBQUQsRUFBTyx5QkFBUCxDQUZQO0FBR0hHLFVBQU0sRUFBRSxJQUhMO0FBSUhDLFlBQVEsRUFBRSxDQUFDQywwREFBRCxFQUFvQixrQ0FBcEI7QUFKUCxHQU40QjtBQVluQ0MsVUFBUSxFQUFFO0FBQ05SLFFBQUksRUFBRUMsTUFEQTtBQUVOQyxZQUFRLEVBQUUsQ0FBQyxJQUFELEVBQU8sNEJBQVAsQ0FGSjtBQUdOTyxhQUFTLEVBQUUsQ0FBQyxDQUFELEVBQUksZ0RBQUosQ0FITDtBQUlOQyxVQUFNLEVBQUU7QUFKRixHQVp5QjtBQWtCbkNDLFFBQU0sRUFBRTtBQUNKQyxhQUFTLEVBQUU7QUFDUFosVUFBSSxFQUFFQyxNQURDO0FBRVBDLGNBQVEsRUFBRTtBQUZILEtBRFA7QUFLSlcsT0FBRyxFQUFFO0FBQ0RiLFVBQUksRUFBRUMsTUFETDtBQUVEQyxjQUFRLEVBQUU7QUFGVDtBQUxELEdBbEIyQjtBQTRCbkNZLE1BQUksRUFBRTtBQUNGZCxRQUFJLEVBQUVDLE1BREo7QUFFRmMsV0FBTyxFQUFFO0FBRlAsR0E1QjZCO0FBZ0NuQ0MsV0FBUyxFQUFFO0FBQ1BoQixRQUFJLEVBQUVpQixJQURDO0FBRVBGLFdBQU8sRUFBRUUsSUFBSSxDQUFDQztBQUZQLEdBaEN3QjtBQW9DbkNDLG9CQUFrQixFQUFFbEIsTUFwQ2U7QUFxQ25DbUIscUJBQW1CLEVBQUVIO0FBckNjLENBQXBCLENBQW5CLEMsQ0F3Q0E7O0FBQ0FwQixVQUFVLENBQUN3QixHQUFYLENBQWUsTUFBZixFQUF1QixnQkFBZ0JDLElBQWhCLEVBQXNCO0FBQ3pDLE1BQUksQ0FBQyxLQUFLQyxVQUFMLENBQWdCLFVBQWhCLENBQUwsRUFBa0M7QUFDOUJELFFBQUk7QUFDUDs7QUFFRCxPQUFLZCxRQUFMLEdBQWdCLE1BQU1nQixvREFBQSxDQUFZLEtBQUtoQixRQUFqQixFQUEyQixFQUEzQixDQUF0QjtBQUNILENBTkQsRSxDQVFBOztBQUNBWCxVQUFVLENBQUM0QixPQUFYLENBQW1CQyxlQUFuQixHQUFxQyxnQkFBZ0JDLGVBQWhCLEVBQWlDO0FBQ2xFLFNBQU8sTUFBTUgsdURBQUEsQ0FBZUcsZUFBZixFQUFnQyxLQUFLbkIsUUFBckMsQ0FBYjtBQUNILENBRkQsQyxDQUlBOzs7QUFDQVgsVUFBVSxDQUFDNEIsT0FBWCxDQUFtQkcscUJBQW5CLEdBQTJDLFlBQVk7QUFFbkQ7QUFDQSxRQUFNQyxVQUFVLEdBQUdDLHlEQUFBLENBQW1CLEVBQW5CLEVBQXVCQyxRQUF2QixDQUFnQyxLQUFoQyxDQUFuQixDQUhtRCxDQUtuRDs7QUFDQSxPQUFLWixrQkFBTCxHQUEwQlcsd0RBQUEsQ0FBa0IsUUFBbEIsRUFBNEJFLE1BQTVCLENBQW1DSCxVQUFuQyxFQUErQ0ksTUFBL0MsQ0FBc0QsS0FBdEQsQ0FBMUIsQ0FObUQsQ0FRbkQ7O0FBQ0EsT0FBS2IsbUJBQUwsR0FBMkJILElBQUksQ0FBQ0MsR0FBTCxLQUFhLEtBQUssRUFBTCxHQUFVLElBQWxEO0FBRUEsU0FBT1csVUFBUDtBQUVILENBYkQ7O0FBZUEsK0RBQWUvQiw2REFBQSxJQUF3QkEscURBQUEsQ0FBZSxNQUFmLEVBQXVCRCxVQUF2QixDQUF2QyIsImZpbGUiOiIuL21vZGVscy91c2VyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xuaW1wb3J0IHZhbGlkYXRvciBmcm9tICd2YWxpZGF0b3InXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJ1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBuYW1lOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIGVudGVyIHlvdXIgbmFtZSddLFxuICAgICAgICBtYXhMZW5ndGg6IFs1MCwgJ1lvdXIgbmFtZSBjYW5ub3QgZXhjZWVkIDUwIGNoYXJhY3RlcnMnXVxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbCddLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlOiBbdmFsaWRhdG9yLmlzRW1haWwsICdQbGVhc2UgZW50ZXIgdmFsaWQgZW1haWwgYWRkcmVzcyddXG4gICAgfSxcbiAgICBwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBlbnRlciB5b3VyIHBhc3N3b3JkJ10sXG4gICAgICAgIG1pbkxlbmd0aDogWzYsICdZb3VyIHBhc3N3b3JkIG11c3QgYmUgbG9uZ2VyIHRoYW4gNiBjaGFyYWN0ZXJzJ10sXG4gICAgICAgIHNlbGVjdDogZmFsc2VcbiAgICB9LFxuICAgIGF2YXRhcjoge1xuICAgICAgICBwdWJsaWNfaWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHVybDoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcm9sZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6ICd1c2VyJ1xuICAgIH0sXG4gICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIHR5cGU6IERhdGUsXG4gICAgICAgIGRlZmF1bHQ6IERhdGUubm93XG4gICAgfSxcbiAgICByZXNldFBhc3N3b3JkVG9rZW46IFN0cmluZyxcbiAgICByZXNldFBhc3N3b3JkRXhwaXJlOiBEYXRlXG59KVxuXG4vLyBFbmNyeXB0aW5nIHBhc3N3b3JkIGJlZm9yZSBzYXZpbmcgdXNlclxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xuICAgIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSB7XG4gICAgICAgIG5leHQoKVxuICAgIH1cblxuICAgIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCAxMClcbn0pXG5cbi8vIENvbXBhcmUgdXNlciBwYXNzd29yZFxudXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uIChlbnRlcmVkUGFzc3dvcmQpIHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUoZW50ZXJlZFBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKVxufVxuXG4vLyBHZW5lcmF0ZSBwYXNzd29yZCByZXNldCB0b2tlblxudXNlclNjaGVtYS5tZXRob2RzLmdldFJlc2V0UGFzc3dvcmRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIEdlbmVyYXRlIHRva2VuXG4gICAgY29uc3QgcmVzZXRUb2tlbiA9IGNyeXB0by5yYW5kb21CeXRlcygyMCkudG9TdHJpbmcoJ2hleCcpXG5cbiAgICAvLyBIYXNoIGFuZCBzZXQgdG8gcmVzZXRQYXNzd29yZFRva2VuIGZpZWxkXG4gICAgdGhpcy5yZXNldFBhc3N3b3JkVG9rZW4gPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHJlc2V0VG9rZW4pLmRpZ2VzdCgnaGV4Jyk7XG5cbiAgICAvLyBTZXQgdG9rZW4gZXhwaXJlIHRpbWVcbiAgICB0aGlzLnJlc2V0UGFzc3dvcmRFeHBpcmUgPSBEYXRlLm5vdygpICsgMzAgKiA2MCAqIDEwMDBcblxuICAgIHJldHVybiByZXNldFRva2VuO1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./models/user.js\n");

/***/ }),

/***/ "./pages/api/me.js":
/*!*************************!*\
  !*** ./pages/api/me.js ***!
  \*************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_connect__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config_dbConnect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/dbConnect */ \"./config/dbConnect.js\");\n/* harmony import */ var _controllers_authControllers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../controllers/authControllers */ \"./controllers/authControllers.js\");\n/* harmony import */ var _middlewares_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../middlewares/auth */ \"./middlewares/auth.js\");\n/* harmony import */ var _middlewares_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../middlewares/errors */ \"./middlewares/errors.js\");\n\n\n\n\n\nconst handler = next_connect__WEBPACK_IMPORTED_MODULE_0___default()({\n  onError: _middlewares_errors__WEBPACK_IMPORTED_MODULE_4__.default\n});\n(0,_config_dbConnect__WEBPACK_IMPORTED_MODULE_1__.default)();\nhandler.use(_middlewares_auth__WEBPACK_IMPORTED_MODULE_3__.isAuthenticatedUser).get(_controllers_authControllers__WEBPACK_IMPORTED_MODULE_2__.currentUserProfile);\n/* harmony default export */ __webpack_exports__[\"default\"] = (handler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL3BhZ2VzL2FwaS9tZS5qcz9hY2I0Il0sIm5hbWVzIjpbImhhbmRsZXIiLCJuYyIsIm9uRXJyb3IiLCJkYkNvbm5lY3QiLCJ1c2UiLCJpc0F1dGhlbnRpY2F0ZWRVc2VyIiwiZ2V0IiwiY3VycmVudFVzZXJQcm9maWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBLE1BQU1BLE9BQU8sR0FBR0MsbURBQUUsQ0FBQztBQUFFQyxTQUFPQTtBQUFULENBQUQsQ0FBbEI7QUFFQUMsMERBQVM7QUFFVEgsT0FBTyxDQUFDSSxHQUFSLENBQVlDLGtFQUFaLEVBQWlDQyxHQUFqQyxDQUFxQ0MsNEVBQXJDO0FBRUEsK0RBQWVQLE9BQWYiLCJmaWxlIjoiLi9wYWdlcy9hcGkvbWUuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbmMgZnJvbSAnbmV4dC1jb25uZWN0J1xuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICcuLi8uLi9jb25maWcvZGJDb25uZWN0J1xuXG5pbXBvcnQgeyBjdXJyZW50VXNlclByb2ZpbGUgfSBmcm9tICcuLi8uLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcnMnXG5cbmltcG9ydCB7IGlzQXV0aGVudGljYXRlZFVzZXIgfSBmcm9tICcuLi8uLi9taWRkbGV3YXJlcy9hdXRoJ1xuaW1wb3J0IG9uRXJyb3IgZnJvbSAnLi4vLi4vbWlkZGxld2FyZXMvZXJyb3JzJ1xuXG5jb25zdCBoYW5kbGVyID0gbmMoeyBvbkVycm9yIH0pO1xuXG5kYkNvbm5lY3QoKTtcblxuaGFuZGxlci51c2UoaXNBdXRoZW50aWNhdGVkVXNlcikuZ2V0KGN1cnJlbnRVc2VyUHJvZmlsZSlcblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/api/me.js\n");

/***/ }),

/***/ "./utils/errorHandler.js":
/*!*******************************!*\
  !*** ./utils/errorHandler.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass ErrorHandler extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.statusCode = statusCode;\n    Error.captureStackTrace(this, this.constructor);\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ErrorHandler);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL3V0aWxzL2Vycm9ySGFuZGxlci5qcz8xNGE2Il0sIm5hbWVzIjpbIkVycm9ySGFuZGxlciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsImNhcHR1cmVTdGFja1RyYWNlIl0sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsWUFBTixTQUEyQkMsS0FBM0IsQ0FBaUM7QUFDL0JDLGFBQVcsQ0FBQ0MsT0FBRCxFQUFVQyxVQUFWLEVBQXNCO0FBQy9CLFVBQU1ELE9BQU47QUFDQSxTQUFLQyxVQUFMLEdBQWtCQSxVQUFsQjtBQUVBSCxTQUFLLENBQUNJLGlCQUFOLENBQXdCLElBQXhCLEVBQThCLEtBQUtILFdBQW5DO0FBQ0Q7O0FBTjhCOztBQVNqQywrREFBZUYsWUFBZiIsImZpbGUiOiIuL3V0aWxzL2Vycm9ySGFuZGxlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEVycm9ySGFuZGxlciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgc3RhdHVzQ29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG5cbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBFcnJvckhhbmRsZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/errorHandler.js\n");

/***/ }),

/***/ "./utils/sendEmail.js":
/*!****************************!*\
  !*** ./utils/sendEmail.js ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst sendEmail = async options => {\n  const transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n    host: \"smtp.mailtrap.io\\\"\",\n    port: \"2525\",\n    auth: {\n      user: \"f5c4edd0d054c3\",\n      pass: \"bd67b3f2ab8f51\"\n    }\n  });\n  const message = {\n    from: `${\"BooKIT\"} < ${\"noreply@bookit.com\"}>`,\n    to: options.email,\n    subject: options.subject,\n    text: options.message\n  };\n  await transporter.sendMail(message);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (sendEmail);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmItbWVybi8uL3V0aWxzL3NlbmRFbWFpbC5qcz84YWEwIl0sIm5hbWVzIjpbInNlbmRFbWFpbCIsIm9wdGlvbnMiLCJ0cmFuc3BvcnRlciIsIm5vZGVtYWlsZXIiLCJob3N0IiwicHJvY2VzcyIsInBvcnQiLCJhdXRoIiwidXNlciIsInBhc3MiLCJTTVRQX1BBU1NXT1JEIiwibWVzc2FnZSIsImZyb20iLCJ0byIsImVtYWlsIiwic3ViamVjdCIsInRleHQiLCJzZW5kTWFpbCJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7O0FBRUEsTUFBTUEsU0FBUyxHQUFHLE1BQU9DLE9BQVAsSUFBbUI7QUFDbkMsUUFBTUMsV0FBVyxHQUFHQyxpRUFBQSxDQUEyQjtBQUM3Q0MsUUFBSSxFQUFFQyxvQkFEdUM7QUFFN0NDLFFBQUksRUFBRUQsTUFGdUM7QUFHN0NFLFFBQUksRUFBRTtBQUNKQyxVQUFJLEVBQUVILGdCQURGO0FBRUpJLFVBQUksRUFBRUosZ0JBQXlCSztBQUYzQjtBQUh1QyxHQUEzQixDQUFwQjtBQVNBLFFBQU1DLE9BQU8sR0FBRztBQUNkQyxRQUFJLEVBQUcsR0FBRVAsUUFBMkIsTUFBS0Esb0JBQTRCLEdBRHZEO0FBRWRRLE1BQUUsRUFBRVosT0FBTyxDQUFDYSxLQUZFO0FBR2RDLFdBQU8sRUFBRWQsT0FBTyxDQUFDYyxPQUhIO0FBSWRDLFFBQUksRUFBRWYsT0FBTyxDQUFDVTtBQUpBLEdBQWhCO0FBT0EsUUFBTVQsV0FBVyxDQUFDZSxRQUFaLENBQXFCTixPQUFyQixDQUFOO0FBQ0QsQ0FsQkQ7O0FBb0JBLCtEQUFlWCxTQUFmIiwiZmlsZSI6Ii4vdXRpbHMvc2VuZEVtYWlsLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSBcIm5vZGVtYWlsZXJcIjtcblxuY29uc3Qgc2VuZEVtYWlsID0gYXN5bmMgKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgaG9zdDogcHJvY2Vzcy5lbnYuU01UUF9IT1NULFxuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlNNVFBfUE9SVCxcbiAgICBhdXRoOiB7XG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5TTVRQX1VTRVIsXG4gICAgICBwYXNzOiBwcm9jZXNzLmVudi5TTVRQX1BBU1NXT1JELFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgZnJvbTogYCR7cHJvY2Vzcy5lbnYuU01UUF9GUk9NX05BTUV9IDwgJHtwcm9jZXNzLmVudi5TTVRQX0ZST01fRU1BSUx9PmAsXG4gICAgdG86IG9wdGlvbnMuZW1haWwsXG4gICAgc3ViamVjdDogb3B0aW9ucy5zdWJqZWN0LFxuICAgIHRleHQ6IG9wdGlvbnMubWVzc2FnZSxcbiAgfTtcblxuICBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtZXNzYWdlKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbmRFbWFpbDtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/sendEmail.js\n");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ (function(module) {

"use strict";
module.exports = require("bcryptjs");;

/***/ }),

/***/ "cloudinary":
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/***/ (function(module) {

"use strict";
module.exports = require("cloudinary");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ (function(module) {

"use strict";
module.exports = require("crypto");;

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ (function(module) {

"use strict";
module.exports = require("mongoose");;

/***/ }),

/***/ "next-absolute-url":
/*!************************************!*\
  !*** external "next-absolute-url" ***!
  \************************************/
/***/ (function(module) {

"use strict";
module.exports = require("next-absolute-url");;

/***/ }),

/***/ "next-auth/client":
/*!***********************************!*\
  !*** external "next-auth/client" ***!
  \***********************************/
/***/ (function(module) {

"use strict";
module.exports = require("next-auth/client");;

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ (function(module) {

"use strict";
module.exports = require("next-connect");;

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ (function(module) {

"use strict";
module.exports = require("nodemailer");;

/***/ }),

/***/ "validator":
/*!****************************!*\
  !*** external "validator" ***!
  \****************************/
/***/ (function(module) {

"use strict";
module.exports = require("validator");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
var __webpack_exports__ = (__webpack_exec__("./pages/api/me.js"));
module.exports = __webpack_exports__;

})();